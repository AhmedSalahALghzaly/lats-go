{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":221},"end":{"line":6,"column":45,"index":266}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../store/appStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":267},"end":{"line":7,"column":51,"index":318}}],"key":"n0CCSj0uILqMB2ZG0ZFwUPWKa9s=","exportNames":["*"],"imports":1}},{"name":"../queries","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":319},"end":{"line":13,"column":20,"index":448}}],"key":"vBqSlLX3RDp+sEQjec929LcVMrw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useShoppingHubData\", {\n    enumerable: true,\n    get: function () {\n      return useShoppingHubData;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _storeAppStore = require(_dependencyMap[1], \"../../store/appStore\");\n  var _queries = require(_dependencyMap[2], \"../queries\");\n  /**\n   * useShoppingHubData - Main data fetching and state management hook\n   * REFACTORED: Uses React Query for data fetching with caching and optimistic updates\n   * Handles loading data for both customer and admin views\n   */\n\n  /**\n   * Main hook for shopping hub data - uses React Query for all data fetching\n   */\n  const useShoppingHubData = ({\n    customerId,\n    customerData,\n    isAdminView\n  }) => {\n    const user = (0, _storeAppStore.useAppStore)(state => state.user);\n    const setCartItems = (0, _storeAppStore.useAppStore)(state => state.setCartItems);\n\n    // Determine target user\n    const targetUserId = customerId || user?.id;\n    const isOwnProfile = !isAdminView && !customerId;\n\n    // Use React Query hooks for data fetching\n    const userDataQuery = (0, _queries.useShoppingHubQuery)(!isAdminView && isOwnProfile);\n    const customerDataQuery = (0, _queries.useCustomerShoppingDataQuery)(customerId, isAdminView && !!customerId);\n\n    // Derive state from queries\n    const loading = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.isLoading;\n      }\n      return userDataQuery.isLoading;\n    }, [isAdminView, customerId, customerDataQuery.isLoading, userDataQuery.isLoading]);\n    const refreshing = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.isRefetching;\n      }\n      return userDataQuery.isRefetching;\n    }, [isAdminView, customerId, customerDataQuery.isRefetching, userDataQuery.isRefetching]);\n    const favorites = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.favorites;\n      }\n      return userDataQuery.favorites;\n    }, [isAdminView, customerId, customerDataQuery.favorites, userDataQuery.favorites]);\n    const cartItems = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.cart;\n      }\n      return userDataQuery.cartItems;\n    }, [isAdminView, customerId, customerDataQuery.cart, userDataQuery.cartItems]);\n    const orders = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.orders;\n      }\n      return userDataQuery.orders;\n    }, [isAdminView, customerId, customerDataQuery.orders, userDataQuery.orders]);\n    const profileData = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerData;\n      }\n      return userDataQuery.profileData;\n    }, [isAdminView, customerId, customerData, userDataQuery.profileData]);\n\n    // Refresh function\n    const onRefresh = (0, _react.useCallback)(() => {\n      if (isAdminView && customerId) {\n        customerDataQuery.refetch();\n      } else {\n        userDataQuery.refetch();\n      }\n    }, [isAdminView, customerId, customerDataQuery, userDataQuery]);\n\n    // Load data function (for backward compatibility)\n    const loadData = (0, _react.useCallback)(() => {\n      onRefresh();\n    }, [onRefresh]);\n\n    // Update functions (for local state management if needed)\n    const setFavorites = (0, _react.useCallback)(newFavorites => {\n      // This is now handled by React Query\n      // Manual updates will be reflected after refetch\n    }, []);\n    const setLocalCartItems = (0, _react.useCallback)(newCartItems => {\n      setCartItems(newCartItems);\n    }, [setCartItems]);\n    const setOrders = (0, _react.useCallback)(newOrders => {\n      // This is now handled by React Query\n    }, []);\n    return {\n      loading,\n      refreshing,\n      favorites,\n      cartItems,\n      orders,\n      profileData,\n      targetUserId,\n      isOwnProfile,\n      loadData,\n      onRefresh,\n      setFavorites,\n      setLocalCartItems,\n      setOrders\n    };\n  };\n  var _default = useShoppingHubData;\n});","lineCount":127,"map":[[7,2,140,0,"Object"],[7,8,140,0],[7,9,140,0,"defineProperty"],[7,23,140,0],[7,24,140,0,"exports"],[7,31,140,0],[8,4,140,0,"enumerable"],[8,14,140,0],[9,4,140,0,"get"],[9,7,140,0],[9,18,140,0,"get"],[9,19,140,0],[10,6,140,0],[10,13,140,0,"_default"],[10,21,140,0],[11,4,140,0],[12,2,140,0],[13,2,33,0,"Object"],[13,8,33,0],[13,9,33,0,"defineProperty"],[13,23,33,0],[13,24,33,0,"exports"],[13,31,33,0],[14,4,33,0,"enumerable"],[14,14,33,0],[15,4,33,0,"get"],[15,7,33,0],[15,18,33,0,"get"],[15,19,33,0],[16,6,33,0],[16,13,33,0,"useShoppingHubData"],[16,31,33,0],[17,4,33,0],[18,2,33,0],[19,2,6,0],[19,6,6,0,"_react"],[19,12,6,0],[19,15,6,0,"require"],[19,22,6,0],[19,23,6,0,"_dependencyMap"],[19,37,6,0],[20,2,7,0],[20,6,7,0,"_storeAppStore"],[20,20,7,0],[20,23,7,0,"require"],[20,30,7,0],[20,31,7,0,"_dependencyMap"],[20,45,7,0],[21,2,8,0],[21,6,8,0,"_queries"],[21,14,8,0],[21,17,8,0,"require"],[21,24,8,0],[21,25,8,0,"_dependencyMap"],[21,39,8,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[28,2,30,0],[29,0,31,0],[30,0,32,0],[31,2,33,7],[31,8,33,13,"useShoppingHubData"],[31,26,33,31],[31,29,33,34,"useShoppingHubData"],[31,30,33,35],[32,4,34,2,"customerId"],[32,14,34,12],[33,4,35,2,"customerData"],[33,16,35,14],[34,4,36,2,"isAdminView"],[35,2,37,25],[35,3,37,26],[35,8,37,31],[36,4,38,2],[36,10,38,8,"user"],[36,14,38,12],[36,17,38,15],[36,21,38,15,"useAppStore"],[36,35,38,26],[36,36,38,26,"useAppStore"],[36,47,38,26],[36,49,38,28,"state"],[36,54,38,33],[36,58,38,38,"state"],[36,63,38,43],[36,64,38,44,"user"],[36,68,38,48],[36,69,38,49],[37,4,39,2],[37,10,39,8,"setCartItems"],[37,22,39,20],[37,25,39,23],[37,29,39,23,"useAppStore"],[37,43,39,34],[37,44,39,34,"useAppStore"],[37,55,39,34],[37,57,39,36,"state"],[37,62,39,41],[37,66,39,46,"state"],[37,71,39,51],[37,72,39,52,"setCartItems"],[37,84,39,64],[37,85,39,65],[39,4,41,2],[40,4,42,2],[40,10,42,8,"targetUserId"],[40,22,42,20],[40,25,42,23,"customerId"],[40,35,42,33],[40,39,42,37,"user"],[40,43,42,41],[40,45,42,43,"id"],[40,47,42,45],[41,4,43,2],[41,10,43,8,"isOwnProfile"],[41,22,43,20],[41,25,43,23],[41,26,43,24,"isAdminView"],[41,37,43,35],[41,41,43,39],[41,42,43,40,"customerId"],[41,52,43,50],[43,4,45,2],[44,4,46,2],[44,10,46,8,"userDataQuery"],[44,23,46,21],[44,26,46,24],[44,30,46,24,"useShoppingHubQuery"],[44,38,46,43],[44,39,46,43,"useShoppingHubQuery"],[44,58,46,43],[44,60,46,44],[44,61,46,45,"isAdminView"],[44,72,46,56],[44,76,46,60,"isOwnProfile"],[44,88,46,72],[44,89,46,73],[45,4,47,2],[45,10,47,8,"customerDataQuery"],[45,27,47,25],[45,30,47,28],[45,34,47,28,"useCustomerShoppingDataQuery"],[45,42,47,56],[45,43,47,56,"useCustomerShoppingDataQuery"],[45,71,47,56],[45,73,48,4,"customerId"],[45,83,48,14],[45,85,49,4,"isAdminView"],[45,96,49,15],[45,100,49,19],[45,101,49,20],[45,102,49,21,"customerId"],[45,112,50,2],[45,113,50,3],[47,4,52,2],[48,4,53,2],[48,10,53,8,"loading"],[48,17,53,15],[48,20,53,18],[48,24,53,18,"useMemo"],[48,30,53,25],[48,31,53,25,"useMemo"],[48,38,53,25],[48,40,53,26],[48,46,53,32],[49,6,54,4],[49,10,54,8,"isAdminView"],[49,21,54,19],[49,25,54,23,"customerId"],[49,35,54,33],[49,37,54,35],[50,8,55,6],[50,15,55,13,"customerDataQuery"],[50,32,55,30],[50,33,55,31,"isLoading"],[50,42,55,40],[51,6,56,4],[52,6,57,4],[52,13,57,11,"userDataQuery"],[52,26,57,24],[52,27,57,25,"isLoading"],[52,36,57,34],[53,4,58,2],[53,5,58,3],[53,7,58,5],[53,8,58,6,"isAdminView"],[53,19,58,17],[53,21,58,19,"customerId"],[53,31,58,29],[53,33,58,31,"customerDataQuery"],[53,50,58,48],[53,51,58,49,"isLoading"],[53,60,58,58],[53,62,58,60,"userDataQuery"],[53,75,58,73],[53,76,58,74,"isLoading"],[53,85,58,83],[53,86,58,84],[53,87,58,85],[54,4,60,2],[54,10,60,8,"refreshing"],[54,20,60,18],[54,23,60,21],[54,27,60,21,"useMemo"],[54,33,60,28],[54,34,60,28,"useMemo"],[54,41,60,28],[54,43,60,29],[54,49,60,35],[55,6,61,4],[55,10,61,8,"isAdminView"],[55,21,61,19],[55,25,61,23,"customerId"],[55,35,61,33],[55,37,61,35],[56,8,62,6],[56,15,62,13,"customerDataQuery"],[56,32,62,30],[56,33,62,31,"isRefetching"],[56,45,62,43],[57,6,63,4],[58,6,64,4],[58,13,64,11,"userDataQuery"],[58,26,64,24],[58,27,64,25,"isRefetching"],[58,39,64,37],[59,4,65,2],[59,5,65,3],[59,7,65,5],[59,8,65,6,"isAdminView"],[59,19,65,17],[59,21,65,19,"customerId"],[59,31,65,29],[59,33,65,31,"customerDataQuery"],[59,50,65,48],[59,51,65,49,"isRefetching"],[59,63,65,61],[59,65,65,63,"userDataQuery"],[59,78,65,76],[59,79,65,77,"isRefetching"],[59,91,65,89],[59,92,65,90],[59,93,65,91],[60,4,67,2],[60,10,67,8,"favorites"],[60,19,67,17],[60,22,67,20],[60,26,67,20,"useMemo"],[60,32,67,27],[60,33,67,27,"useMemo"],[60,40,67,27],[60,42,67,28],[60,48,67,34],[61,6,68,4],[61,10,68,8,"isAdminView"],[61,21,68,19],[61,25,68,23,"customerId"],[61,35,68,33],[61,37,68,35],[62,8,69,6],[62,15,69,13,"customerDataQuery"],[62,32,69,30],[62,33,69,31,"favorites"],[62,42,69,40],[63,6,70,4],[64,6,71,4],[64,13,71,11,"userDataQuery"],[64,26,71,24],[64,27,71,25,"favorites"],[64,36,71,34],[65,4,72,2],[65,5,72,3],[65,7,72,5],[65,8,72,6,"isAdminView"],[65,19,72,17],[65,21,72,19,"customerId"],[65,31,72,29],[65,33,72,31,"customerDataQuery"],[65,50,72,48],[65,51,72,49,"favorites"],[65,60,72,58],[65,62,72,60,"userDataQuery"],[65,75,72,73],[65,76,72,74,"favorites"],[65,85,72,83],[65,86,72,84],[65,87,72,85],[66,4,74,2],[66,10,74,8,"cartItems"],[66,19,74,17],[66,22,74,20],[66,26,74,20,"useMemo"],[66,32,74,27],[66,33,74,27,"useMemo"],[66,40,74,27],[66,42,74,28],[66,48,74,34],[67,6,75,4],[67,10,75,8,"isAdminView"],[67,21,75,19],[67,25,75,23,"customerId"],[67,35,75,33],[67,37,75,35],[68,8,76,6],[68,15,76,13,"customerDataQuery"],[68,32,76,30],[68,33,76,31,"cart"],[68,37,76,35],[69,6,77,4],[70,6,78,4],[70,13,78,11,"userDataQuery"],[70,26,78,24],[70,27,78,25,"cartItems"],[70,36,78,34],[71,4,79,2],[71,5,79,3],[71,7,79,5],[71,8,79,6,"isAdminView"],[71,19,79,17],[71,21,79,19,"customerId"],[71,31,79,29],[71,33,79,31,"customerDataQuery"],[71,50,79,48],[71,51,79,49,"cart"],[71,55,79,53],[71,57,79,55,"userDataQuery"],[71,70,79,68],[71,71,79,69,"cartItems"],[71,80,79,78],[71,81,79,79],[71,82,79,80],[72,4,81,2],[72,10,81,8,"orders"],[72,16,81,14],[72,19,81,17],[72,23,81,17,"useMemo"],[72,29,81,24],[72,30,81,24,"useMemo"],[72,37,81,24],[72,39,81,25],[72,45,81,31],[73,6,82,4],[73,10,82,8,"isAdminView"],[73,21,82,19],[73,25,82,23,"customerId"],[73,35,82,33],[73,37,82,35],[74,8,83,6],[74,15,83,13,"customerDataQuery"],[74,32,83,30],[74,33,83,31,"orders"],[74,39,83,37],[75,6,84,4],[76,6,85,4],[76,13,85,11,"userDataQuery"],[76,26,85,24],[76,27,85,25,"orders"],[76,33,85,31],[77,4,86,2],[77,5,86,3],[77,7,86,5],[77,8,86,6,"isAdminView"],[77,19,86,17],[77,21,86,19,"customerId"],[77,31,86,29],[77,33,86,31,"customerDataQuery"],[77,50,86,48],[77,51,86,49,"orders"],[77,57,86,55],[77,59,86,57,"userDataQuery"],[77,72,86,70],[77,73,86,71,"orders"],[77,79,86,77],[77,80,86,78],[77,81,86,79],[78,4,88,2],[78,10,88,8,"profileData"],[78,21,88,19],[78,24,88,22],[78,28,88,22,"useMemo"],[78,34,88,29],[78,35,88,29,"useMemo"],[78,42,88,29],[78,44,88,30],[78,50,88,36],[79,6,89,4],[79,10,89,8,"isAdminView"],[79,21,89,19],[79,25,89,23,"customerId"],[79,35,89,33],[79,37,89,35],[80,8,90,6],[80,15,90,13,"customerData"],[80,27,90,25],[81,6,91,4],[82,6,92,4],[82,13,92,11,"userDataQuery"],[82,26,92,24],[82,27,92,25,"profileData"],[82,38,92,36],[83,4,93,2],[83,5,93,3],[83,7,93,5],[83,8,93,6,"isAdminView"],[83,19,93,17],[83,21,93,19,"customerId"],[83,31,93,29],[83,33,93,31,"customerData"],[83,45,93,43],[83,47,93,45,"userDataQuery"],[83,60,93,58],[83,61,93,59,"profileData"],[83,72,93,70],[83,73,93,71],[83,74,93,72],[85,4,95,2],[86,4,96,2],[86,10,96,8,"onRefresh"],[86,19,96,17],[86,22,96,20],[86,26,96,20,"useCallback"],[86,32,96,31],[86,33,96,31,"useCallback"],[86,44,96,31],[86,46,96,32],[86,52,96,38],[87,6,97,4],[87,10,97,8,"isAdminView"],[87,21,97,19],[87,25,97,23,"customerId"],[87,35,97,33],[87,37,97,35],[88,8,98,6,"customerDataQuery"],[88,25,98,23],[88,26,98,24,"refetch"],[88,33,98,31],[88,34,98,32],[88,35,98,33],[89,6,99,4],[89,7,99,5],[89,13,99,11],[90,8,100,6,"userDataQuery"],[90,21,100,19],[90,22,100,20,"refetch"],[90,29,100,27],[90,30,100,28],[90,31,100,29],[91,6,101,4],[92,4,102,2],[92,5,102,3],[92,7,102,5],[92,8,102,6,"isAdminView"],[92,19,102,17],[92,21,102,19,"customerId"],[92,31,102,29],[92,33,102,31,"customerDataQuery"],[92,50,102,48],[92,52,102,50,"userDataQuery"],[92,65,102,63],[92,66,102,64],[92,67,102,65],[94,4,104,2],[95,4,105,2],[95,10,105,8,"loadData"],[95,18,105,16],[95,21,105,19],[95,25,105,19,"useCallback"],[95,31,105,30],[95,32,105,30,"useCallback"],[95,43,105,30],[95,45,105,31],[95,51,105,37],[96,6,106,4,"onRefresh"],[96,15,106,13],[96,16,106,14],[96,17,106,15],[97,4,107,2],[97,5,107,3],[97,7,107,5],[97,8,107,6,"onRefresh"],[97,17,107,15],[97,18,107,16],[97,19,107,17],[99,4,109,2],[100,4,110,2],[100,10,110,8,"setFavorites"],[100,22,110,20],[100,25,110,23],[100,29,110,23,"useCallback"],[100,35,110,34],[100,36,110,34,"useCallback"],[100,47,110,34],[100,49,110,36,"newFavorites"],[100,61,110,55],[100,65,110,60],[101,6,111,4],[102,6,112,4],[103,4,112,4],[103,5,113,3],[103,7,113,5],[103,9,113,7],[103,10,113,8],[104,4,115,2],[104,10,115,8,"setLocalCartItems"],[104,27,115,25],[104,30,115,28],[104,34,115,28,"useCallback"],[104,40,115,39],[104,41,115,39,"useCallback"],[104,52,115,39],[104,54,115,41,"newCartItems"],[104,66,115,60],[104,70,115,65],[105,6,116,4,"setCartItems"],[105,18,116,16],[105,19,116,17,"newCartItems"],[105,31,116,29],[105,32,116,30],[106,4,117,2],[106,5,117,3],[106,7,117,5],[106,8,117,6,"setCartItems"],[106,20,117,18],[106,21,117,19],[106,22,117,20],[107,4,119,2],[107,10,119,8,"setOrders"],[107,19,119,17],[107,22,119,20],[107,26,119,20,"useCallback"],[107,32,119,31],[107,33,119,31,"useCallback"],[107,44,119,31],[107,46,119,33,"newOrders"],[107,55,119,49],[107,59,119,54],[108,6,120,4],[109,4,120,4],[109,5,121,3],[109,7,121,5],[109,9,121,7],[109,10,121,8],[110,4,123,2],[110,11,123,9],[111,6,124,4,"loading"],[111,13,124,11],[112,6,125,4,"refreshing"],[112,16,125,14],[113,6,126,4,"favorites"],[113,15,126,13],[114,6,127,4,"cartItems"],[114,15,127,13],[115,6,128,4,"orders"],[115,12,128,10],[116,6,129,4,"profileData"],[116,17,129,15],[117,6,130,4,"targetUserId"],[117,18,130,16],[118,6,131,4,"isOwnProfile"],[118,18,131,16],[119,6,132,4,"loadData"],[119,14,132,12],[120,6,133,4,"onRefresh"],[120,15,133,13],[121,6,134,4,"setFavorites"],[121,18,134,16],[122,6,135,4,"setLocalCartItems"],[122,23,135,21],[123,6,136,4,"setOrders"],[124,4,137,2],[124,5,137,3],[125,2,138,0],[125,3,138,1],[126,2,140,0],[126,6,140,0,"_default"],[126,14,140,0],[126,17,140,15,"useShoppingHubData"],[126,35,140,33],[127,0,140,34],[127,3]],"functionMap":{"names":["<global>","useShoppingHubData","useAppStore$argument_0","useMemo$argument_0","onRefresh","loadData","setFavorites","setLocalCartItems","setOrders"],"mappings":"AAA;kCCgC;2BCK,qBD;mCCC,6BD;0BEc;GFK;6BEE;GFK;4BEE;GFK;4BEE;GFK;yBEE;GFK;8BEE;GFK;gCGG;GHM;+BIG;GJE;mCKG;GLG;wCME;GNE;gCOE;GPE;CDiB"},"hasCjsExports":false},"type":"js/module"}]}